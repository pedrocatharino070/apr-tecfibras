<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APR - TecFibras TELECOM</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>
    <style>
        /* Estilos para deixar o formulário mais limpo e profissional */
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; margin: 0 auto; max-width: 800px; padding: 20px; background-color: #f0f2f5; }
        .form-container { background-color: #fff; padding: 30px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        h1, h2 { border-bottom: 1px solid #dee2e6; padding-bottom: 10px; color: #343a40; }
        h1 { text-align: center; font-size: 24px; }
        h2 { font-size: 18px; margin-top: 30px; }
        label, .checkbox-title { display: block; margin-top: 20px; font-weight: 600; color: #495057; }
        input[type="text"], input[type="file"], textarea, select { width: 100%; padding: 12px; margin-top: 8px; border-radius: 6px; border: 1px solid #ced4da; box-sizing: border-box; }
        button { background-color: #007bff; color: white; padding: 12px 18px; border: none; border-radius: 6px; cursor: pointer; margin-top: 10px; font-weight: 600; }
        button:hover { background-color: #0056b3; }
        #gerarPDF { width: 100%; background-color: #d93636; font-size: 18px; padding: 15px; margin-top: 30px; }
        #gerarPDF:hover { background-color: #b82c2c; }
        .image-preview { max-width: 200px; margin-top: 10px; border: 1px solid #dee2e6; border-radius: 6px; }
        #signature-pad-container { border: 1px solid #ced4da; margin-top: 8px; border-radius: 6px; display: inline-block; }
        .location-wrapper { display: flex; align-items: center; gap: 10px; }
        .checkbox-group div { margin-top: 8px; }
        .checkbox-group label { font-weight: normal; display: inline; margin-left: 8px; }
    </style>
</head>
<body>

    <div class="form-container">
        <img src="LOGO TECFIBRASa.jpg" alt="Logo TecFibras" width="300" style="display: block; margin: auto; margin-bottom: 20px;">
        
        <h1>Formulário de APR</h1>
        
        <form id="aprForm" onsubmit="return false;">
            <h2>1. DADOS DO SERVIÇO E EQUIPE</h2>
            <label for="os">Ordem de Serviço (OS):</label>
            <input type="text" id="os" required>
            
            <label for="tecnico">Técnico Responsável:</label>
            <input type="text" id="tecnico" required>

            <label for="endereco">Endereço do Local:</label>
            <div class="location-wrapper">
                <input type="text" id="endereco" required placeholder="Preencha ou use o GPS">
                <button type="button" id="getLocationBtn">Usar GPS</button>
            </div>

            <h2>2. REGISTROS FOTOGRÁFICOS</h2>
            <label for="fotoLocal">Foto do Local:</label>
            <input type="file" id="fotoLocal" accept="image/*" capture required>
            <img id="previewLocal" class="image-preview" alt="Preview">
             
            <label for="fotoEquipe">Foto da Equipe:</label>
            <input type="file" id="fotoEquipe" accept="image/*" capture required>
            <img id="previewEquipe" class="image-preview" alt="Preview">

            <h2>3. ANÁLISE DE RISCOS</h2>
            <div class="checkbox-group" id="riscos-group">
                <span class="checkbox-title">(Marcar os riscos identificados)</span>
                <div><input type="checkbox" id="risco1"><label for="risco1">Queda de altura acima de 2m (NR-35)</label></div>
                <div><input type="checkbox" id="risco2"><label for="risco2">Esforço físico</label></div>
                <div><input type="checkbox" id="risco3"><label for="risco3">Postura inadequada</label></div>
                <div><input type="checkbox" id="risco4"><label for="risco4">Choque elétrico (NR-10)</label></div>
            </div>
            
            <h2>4. EQUIPAMENTOS (CHECKLIST)</h2>
            <div class="checkbox-group" id="epis-group">
                <span class="checkbox-title">(Marcar itens em posse)</span>
                <div><input type="checkbox" id="epi1"><label for="epi1">Botina de Segurança</label></div>
                <div><input type="checkbox" id="epi2"><label for="epi2">Capacete Aba Total com Jugular</label></div>
                <div><input type="checkbox" id="epi3"><label for="epi3">Cinto Tipo Paraquedista</label></div>
            </div>

            <h2>5. ASSINATURA</h2>
            <label for="signature-canvas">Assine no quadro abaixo:</
